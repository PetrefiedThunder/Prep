# ============================================================================
# PREP PLATFORM - PRODUCTION ENVIRONMENT CONFIGURATION TEMPLATE
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env files with real credentials to version control

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string for main application database
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://prep_user:CHANGE_ME@localhost:5432/prep_production

# Redis connection string for caching and session management
# Format: redis://[:password@]host:port/db
REDIS_URL=redis://:CHANGE_ME@localhost:6379/0

# ============================================================================
# STRIPE PAYMENT PROCESSING
# ============================================================================

# Stripe secret key (sk_live_... for production, sk_test_... for testing)
STRIPE_SECRET_KEY=sk_live_CHANGE_ME

# Stripe webhook signing secret (whsec_...)
# Get this from Stripe Dashboard -> Developers -> Webhooks
STRIPE_WEBHOOK_SECRET=whsec_CHANGE_ME

# Stripe Connect OAuth client ID
STRIPE_CONNECT_CLIENT_ID=ca_CHANGE_ME

# URLs for Stripe Connect onboarding flow
STRIPE_CONNECT_RETURN_URL=https://yourdomain.com/connect/return
STRIPE_CONNECT_REFRESH_URL=https://yourdomain.com/connect/refresh

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# JWT signing secret (generate with: openssl rand -base64 32)
SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_SECRET

# Admin JWT secret (separate from user JWT for enhanced security)
ADMIN_JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET

# JWT audience (your domain or service name)
ADMIN_JWT_AUDIENCE=prep-admin
OIDC_AUDIENCE=prep-platform

# JWT signing algorithm (HS256 or RS256)
ADMIN_JWT_ALGORITHM=HS256

# Auth signing key (for RS256, provide path to private key)
AUTH_SIGNING_KEY=${SECRET_KEY}

# Session secret for cookie signing
SESSION_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET

# ============================================================================
# EMAIL & NOTIFICATIONS
# ============================================================================

# Email service provider (resend, sendgrid, ses)
EMAIL_PROVIDER=resend

# Resend API key (if using Resend)
RESEND_API_KEY=re_CHANGE_ME

# SendGrid API key (if using SendGrid)
SENDGRID_API_KEY=SG.CHANGE_ME

# From email address for system emails
EMAIL_FROM=noreply@yourdomain.com

# Support email address
SUPPORT_EMAIL=support@yourdomain.com

# Twilio credentials for SMS notifications
TWILIO_ACCOUNT_SID=CHANGE_ME
TWILIO_AUTH_TOKEN=CHANGE_ME
TWILIO_PHONE_NUMBER=+1XXXXXXXXXX

# ============================================================================
# FILE STORAGE & CDN
# ============================================================================

# S3-compatible object storage (AWS S3, MinIO, DigitalOcean Spaces)
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=prep-production-assets
S3_ACCESS_KEY_ID=CHANGE_ME
S3_SECRET_ACCESS_KEY=CHANGE_ME

# CDN URL for serving static assets
CDN_URL=https://cdn.yourdomain.com

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================

# Google Maps API for geocoding and maps
GOOGLE_MAPS_API_KEY=CHANGE_ME

# DocuSign for contract signing
DOCUSIGN_INTEGRATION_KEY=CHANGE_ME
DOCUSIGN_USER_ID=CHANGE_ME
DOCUSIGN_ACCOUNT_ID=CHANGE_ME
DOCUSIGN_PRIVATE_KEY_PATH=/path/to/private_key.pem

# QuickBooks OAuth (if using accounting integration)
QUICKBOOKS_CLIENT_ID=CHANGE_ME
QUICKBOOKS_CLIENT_SECRET=CHANGE_ME
QUICKBOOKS_REDIRECT_URI=https://yourdomain.com/integrations/quickbooks/callback

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Sentry for error tracking
SENTRY_DSN=https://CHANGE_ME@sentry.io/PROJECT_ID
SENTRY_ENVIRONMENT=production

# DataDog for APM and metrics
DD_API_KEY=CHANGE_ME
DD_SITE=datadoghq.com
DD_SERVICE=prep-platform
DD_ENV=production

# Prometheus metrics endpoint authentication
METRICS_AUTH_TOKEN=CHANGE_ME

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Application environment
NODE_ENV=production
ENVIRONMENT=production

# API base URL
API_BASE_URL=https://api.yourdomain.com

# Frontend URL
FRONTEND_URL=https://yourdomain.com

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# ============================================================================
# PREPCHEF MICROSERVICES CONFIGURATION
# ============================================================================

# Service ports (optional, defaults will be used if not set)
AUTH_SVC_PORT=3001
BOOKING_SVC_PORT=3002
PAYMENTS_SVC_PORT=3003
LISTING_SVC_PORT=3004
COMPLIANCE_SVC_PORT=3005
NOTIF_SVC_PORT=3006
ADMIN_SVC_PORT=3007

# Service URLs (for inter-service communication)
AUTH_SERVICE_URL=http://auth-svc:3001
BOOKING_SERVICE_URL=http://booking-svc:3002
PAYMENTS_SERVICE_URL=http://payments-svc:3003
LISTING_SERVICE_URL=http://listing-svc:3004
COMPLIANCE_SERVICE_URL=http://compliance-svc:3005
NOTIFICATION_SERVICE_URL=http://notif-svc:3006
ADMIN_SERVICE_URL=http://admin-svc:3007

# ============================================================================
# REGULATORY COMPLIANCE DATA
# ============================================================================

# Federal regulatory database (SQLite or PostgreSQL)
FEDERAL_DB_PATH=/data/federal/prep_federal_layer.sqlite

# City regulatory database
CITY_DB_PATH=/data/cities/prep_city_regulations.sqlite

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable/disable features
FEATURE_PILOT_PROGRAM=true
FEATURE_INSTANT_BOOKING=false
FEATURE_AI_MATCHING=false
FEATURE_DOCUMENT_OCR=true

# ============================================================================
# AIRFLOW (DATA PIPELINES)
# ============================================================================

# Airflow web server
AIRFLOW_HOME=/opt/airflow
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=${DATABASE_URL}
AIRFLOW__CORE__FERNET_KEY=CHANGE_ME_GENERATE_FERNET_KEY

# Generate Fernet key with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

# ============================================================================
# DEVELOPMENT & DEBUGGING (SET TO false IN PRODUCTION)
# ============================================================================

DEBUG=false
LOG_LEVEL=info
ENABLE_QUERY_LOGGING=false
