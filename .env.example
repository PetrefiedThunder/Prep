# ============================================
# Prep Application Environment Variables
# ============================================
# Copy this file to .env and fill in real values
# NEVER commit .env to version control
#
# Required variables are marked with [REQUIRED]
# ============================================

# ============================================
# DATABASE CONFIGURATION
# ============================================
# [REQUIRED] PostgreSQL connection string
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/prepchef
POSTGRES_URL=postgresql://prep:prep@localhost:5432/prep

# Database pool settings (optional)
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ============================================
# REDIS CONFIGURATION
# ============================================
# [REQUIRED] Redis connection string for caching and rate limiting
REDIS_URL=redis://localhost:6379/0

# ============================================
# STORAGE CONFIGURATION (MinIO/S3)
# ============================================
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=prep
MINIO_SECRET_KEY=prep

# S3 backup configuration (optional)
S3_BUCKET=prep-backups
S3_ENDPOINT=http://localhost:9000
AWS_ACCESS_KEY_ID=prep
AWS_SECRET_ACCESS_KEY=prep

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
# [REQUIRED] JWT secret for token signing - generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_GENERATE_A_SECURE_SECRET

# [REQUIRED] Application secret key
SECRET_KEY=CHANGE_ME_GENERATE_A_SECURE_SECRET

# Session configuration
SESSION_EXPIRY_HOURS=24
REFRESH_TOKEN_EXPIRY_DAYS=7

# ============================================
# STRIPE PAYMENT CONFIGURATION
# ============================================
# [REQUIRED for payments] Stripe API keys
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_PUBLIC_KEY=pk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_DEFAULT=100
RATE_LIMIT_WINDOW=60

# ============================================
# CORS CONFIGURATION
# ============================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================
# ENVIRONMENT & LOGGING
# ============================================
ENVIRONMENT=development
NODE_ENV=development
LOG_LEVEL=INFO

# ============================================
# COMPLIANCE & POLICY
# ============================================
PREP_POLICY_BUNDLE_URL=http://localhost:8787/bundles/current.tar.gz
PREP_POLICY_BUNDLE_SIG=http://localhost:8787/bundles/current.tar.gz.minisig

# ============================================
# ENCRYPTION
# ============================================
# [REQUIRED for encryption] KMS master key (64 hex chars = 32 bytes)
KMS_MASTER_KEY_HEX=0000000000000000000000000000000000000000000000000000000000000000

# ============================================
# GITHUB INTEGRATION (for agent monitoring)
# ============================================
GITHUB_TOKEN=
GITHUB_REPO_OWNER=
GITHUB_REPO_NAME=

# ============================================
# API CONFIGURATION
# ============================================
API_BASE_URL=http://localhost:8000

# ============================================
# BACKUP CONFIGURATION
# ============================================
BACKUP_DIR=./backups
BACKUP_RETENTION_DAYS=30
